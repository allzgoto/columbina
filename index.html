<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dottore</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">

<style>
:root{
  --accent-r: 0;
  --accent-g: 200;
  --accent-b: 255;
  --accent: rgba(var(--accent-r), var(--accent-g), var(--accent-b), 0.45);
  --accent-soft: rgba(var(--accent-r), var(--accent-g), var(--accent-b), 0.18);
}

*{margin:0;padding:0;box-sizing:border-box;}

body{
    background:black;
    overflow:hidden;
    font-family:Arial, sans-serif;
    color:white;
}

/* VIDEO */
#video{
    position:fixed;
    inset:0;
    width:100%;
    height:100%;
    object-fit:contain;
    background:black;
    z-index:-3; /* mudou pra abrir espa√ßo pro "blush" */
}

/* ====== TARJAS ESTILOSAS (DIN√ÇMICAS) ====== */
.ambient-bars{
    position:fixed;
    inset:0;
    pointer-events:none;
    z-index:-2;
}

/* LADOS */
.ambient-bars::before,
.ambient-bars::after{
    content:"";
    position:absolute;
    top:0;
    bottom:0;
    width:18vw;              /* largura das laterais */
    min-width:140px;         /* garante em telas grandes */
    max-width:260px;         /* n√£o exagera em telas enormes */
    background:
      radial-gradient(120% 60% at 50% 50%,
        var(--accent) 0%,
        rgba(0,0,0,0.00) 62%),
      linear-gradient(to right,
        rgba(0,0,0,0.92) 0%,
        rgba(0,0,0,0.45) 55%,
        rgba(0,0,0,0.00) 100%);
    filter: blur(14px) saturate(1.25) contrast(1.05);
    opacity:0.95;
}

.ambient-bars::before{
    left:-40px;
    transform: scaleX(1.02);
}

.ambient-bars::after{
    right:-40px;
    transform: scaleX(-1.02); /* espelha */
}

/* Um leve ‚Äúhaze‚Äù geral pra integrar com o v√≠deo */
.ambient-haze{
    position:fixed;
    inset:0;
    pointer-events:none;
    z-index:-2;
    background:
      radial-gradient(60% 55% at 50% 50%,
        rgba(0,0,0,0.00) 0%,
        rgba(0,0,0,0.25) 70%,
        rgba(0,0,0,0.55) 100%),
      radial-gradient(40% 35% at 20% 80%,
        var(--accent-soft) 0%,
        rgba(0,0,0,0) 70%);
    mix-blend-mode: screen;
    opacity:0.75;
}

/* SCANLINES */
.scanlines{
    position:fixed;
    inset:0;
    background:repeating-linear-gradient(
        to bottom,
        rgba(255,255,255,0.03),
        rgba(255,255,255,0.03) 1px,
        transparent 1px,
        transparent 3px
    );
    pointer-events:none;
    z-index:-1;
}

/* BACKGROUND WATERMARK */
.watermark{
    position:fixed;
    bottom:20px;
    right:30px;
    font-size:80px;
    font-family:'Orbitron', sans-serif;
    opacity:0.03;
    letter-spacing:20px;
    pointer-events:none;
    z-index:0;
}

/* LOADING */
#loadingScreen{
    position:fixed;
    inset:0;
    background:radial-gradient(circle at center,#0a0f18,#000);
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    z-index:10;
    transition:opacity .6s ease;
    font-family:'Orbitron', sans-serif;
}

.loading-text{
    letter-spacing:4px;
    margin-bottom:20px;
    font-size:12px;
    opacity:.7;
}

.spinner{
    width:40px;
    height:40px;
    border:3px solid rgba(255,255,255,.1);
    border-top:3px solid #00d4ff;
    border-radius:50%;
    animation:spin 1s linear infinite;
}

@keyframes spin{
    to{ transform:rotate(360deg); }
}

/* ENTER */
#enterBox{
    margin-top:40px;
    padding:18px 70px;
    border-radius:10px;
    background:rgba(10,20,35,0.6);
    border:1px solid rgba(0,200,255,0.4);
    backdrop-filter:blur(25px);
    letter-spacing:8px;
    font-family:'Orbitron', sans-serif;
    font-weight:600;
    font-size:14px;
    color:#cfefff;
    text-shadow:0 0 8px rgba(0,200,255,0.7);
    opacity:0;
    pointer-events:none;
    transition:.4s ease;
    position:relative;
    overflow:hidden;
}

#enterBox::before{
    content:"";
    position:absolute;
    inset:0;
    background:linear-gradient(120deg,transparent,rgba(0,200,255,0.3),transparent);
    transform:translateX(-100%);
    transition:0.6s;
}

#enterBox.show{
    opacity:1;
    pointer-events:auto;
    cursor:pointer;
}

#enterBox:hover::before{
    transform:translateX(100%);
}

/* VOLUME */
#volumeWrapper{
    position:fixed;
    top:20px;
    left:20px;
    display:flex;
    align-items:center;
    gap:10px;
    z-index:20;
    opacity:0;
    transition:opacity .4s ease;
}

#volumeWrapper.visible{
    opacity:1;
}

#volumeBtn{
    width:44px;
    height:44px;
    border-radius:50%;
    backdrop-filter:blur(12px);
    background:rgba(255,255,255,0.08);
    border:1px solid rgba(255,255,255,0.25);
    display:flex;
    justify-content:center;
    align-items:center;
    cursor:pointer;
}

#sliderContainer{
    width:0;
    overflow:hidden;
    transition:width .3s ease;
}

#volumeWrapper.open #sliderContainer{
    width:120px;
}

#volumeRange{
    width:100%;
    appearance:none;
    height:4px;
    border-radius:4px;
    background:linear-gradient(to right, white 70%, rgba(255,255,255,.3) 70%);
    outline:none;
}

#volumeRange::-webkit-slider-thumb{
    appearance:none;
    width:14px;
    height:14px;
    border-radius:50%;
    background:white;
    cursor:pointer;
}
</style>
</head>
<body>

<video id="video" playsinline preload="auto" loop>
    <source src="https://files.catbox.moe/um6f2u.mp4" type="video/mp4">
</video>

<!-- Tarjas estilizadas que seguem a cor do v√≠deo -->
<div class="ambient-bars"></div>
<div class="ambient-haze"></div>

<div class="scanlines"></div>
<div class="watermark">DOTTORE</div>

<div id="loadingScreen">
    <div class="loading-text" id="dynamicText">INITIALIZING EXPERIMENT...</div>
    <div class="spinner"></div>
    <div id="enterBox">ENTER</div>
</div>

<div id="volumeWrapper">
    <div id="volumeBtn">üîä</div>
    <div id="sliderContainer">
        <input type="range" id="volumeRange" min="0" max="1" step="0.01" value="0.7">
    </div>
</div>

<script>
const video = document.getElementById("video");
const enterBox = document.getElementById("enterBox");
const loadingScreen = document.getElementById("loadingScreen");
const dynamicText = document.getElementById("dynamicText");

const volumeWrapper = document.getElementById("volumeWrapper");
const volumeBtn = document.getElementById("volumeBtn");
const volumeRange = document.getElementById("volumeRange");

video.volume = 0.7;

/* Mensagens rotativas */
const messages = [
  "INITIALIZING EXPERIMENT...",
  "STABILIZING MEMORY FRAGMENTS...",
  "SYNCHRONIZING NEURAL PATHWAYS...",
  "OVERRIDING CONSCIOUS LIMITERS..."
];

let msgIndex = 0;
setInterval(()=>{
  msgIndex = (msgIndex + 1) % messages.length;
  dynamicText.textContent = messages[msgIndex];
}, 2500);

/* ---- SISTEMA ANTI-INFINITO ---- */
let enterLiberado = false;
function liberarEnter(){
  if(!enterLiberado){
    enterLiberado = true;
    enterBox.classList.add("show");
  }
}
video.addEventListener("canplaythrough", liberarEnter);
video.addEventListener("loadeddata", ()=> setTimeout(liberarEnter, 1200));
setTimeout(liberarEnter, 4000);

/* ---- CLICK ---- */
enterBox.addEventListener("click", () => {
  video.play().then(()=>{
    loadingScreen.style.opacity="0";
    setTimeout(()=>{ loadingScreen.style.display="none"; },600);
    volumeWrapper.classList.add("visible");
    startAmbientColorSync(); // come√ßa a sincronizar as tarjas com o v√≠deo
  }).catch(err=>{
    console.log("Erro ao iniciar v√≠deo:", err);
  });
});

/* ---- VOLUME ---- */
volumeBtn.addEventListener("click",()=> volumeWrapper.classList.toggle("open"));
volumeRange.addEventListener("input",()=>{
  video.volume = volumeRange.value;
  const percent = video.volume*100;
  volumeRange.style.background =
    `linear-gradient(to right, white ${percent}%, rgba(255,255,255,.3) ${percent}%)`;
});

/* ====== COR DIN√ÇMICA DAS TARJAS (PEGANDO COR DO V√çDEO) ====== */
let ambientRunning = false;
function startAmbientColorSync(){
  if(ambientRunning) return;
  ambientRunning = true;

  const c = document.createElement("canvas");
  const ctx = c.getContext("2d", { willReadFrequently: true });

  // amostra pequena = leve e r√°pida
  const W = 24, H = 14;
  c.width = W; c.height = H;

  function tick(){
    if(video.paused || video.ended){
      requestAnimationFrame(tick);
      return;
    }

    try{
      ctx.drawImage(video, 0, 0, W, H);
      const data = ctx.getImageData(0, 0, W, H).data;

      // m√©dia simples (pulando pixels pra ficar leve)
      let r=0,g=0,b=0,count=0;
      for(let i=0;i<data.length;i+=16){
        r += data[i];
        g += data[i+1];
        b += data[i+2];
        count++;
      }
      r = Math.round(r/count);
      g = Math.round(g/count);
      b = Math.round(b/count);

      // suaviza / deixa mais ‚ÄúDottore‚Äù (frio, puxando pro azul)
      // reduz satura√ß√£o de cores muito quentes
      const coolR = Math.round(r * 0.70);
      const coolG = Math.round(g * 0.85);
      const coolB = Math.min(255, Math.round(b * 1.10 + 10));

      document.documentElement.style.setProperty("--accent-r", coolR);
      document.documentElement.style.setProperty("--accent-g", coolG);
      document.documentElement.style.setProperty("--accent-b", coolB);
    }catch(e){
      // se falhar alguma leitura, s√≥ ignora
    }

    requestAnimationFrame(tick);
  }

  requestAnimationFrame(tick);
}
</script>

</body>
</html>
