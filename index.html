<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Shadow Fight 2 — Entry</title>

<!-- Fonts (manuscrito/antigo, mais “pergaminho”) -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Uncial+Antiqua&family=IM+Fell+English:ital@0;1&display=swap" rel="stylesheet">

<style>
  *{margin:0;padding:0;box-sizing:border-box}
  html,body{width:100%;height:100%;overflow:hidden;background:#000;color:#fff}
  :root{
    --gold: rgba(255,190,120,.92);
    --goldSoft: rgba(255,190,120,.22);
    --ink: rgba(25,18,12,.92);
    --inkSoft: rgba(25,18,12,.55);
    --paper: rgba(214, 191, 150, 0.98);
    --paperDeep: rgba(188, 152, 98, 0.92);
    --shadow: rgba(0,0,0,.72);
    --ui: rgba(255,255,255,.10);
  }

  /* ====== BACKGROUND (depois do enter) ====== */
  #mainVideo{
    position:fixed; inset:0;
    width:100%; height:100%;
    object-fit:cover;
    z-index:0;
    opacity:0;
    transition:opacity 900ms ease;
    filter: blur(8px) contrast(1.08) saturate(.95);
    transform: scale(1.03);
  }
  body.entered #mainVideo{opacity:1}

  /* overlay escuro cinematic */
  #sceneShade{
    position:fixed; inset:0;
    z-index:1;
    pointer-events:none;
    opacity:0;
    transition:opacity 900ms ease;
    background:
      radial-gradient(circle at 50% 45%, rgba(0,0,0,.18) 0%, rgba(0,0,0,.70) 70%, rgba(0,0,0,.88) 100%),
      linear-gradient(180deg, rgba(0,0,0,.65), rgba(0,0,0,.15) 40%, rgba(0,0,0,.75));
  }
  body.entered #sceneShade{opacity:1}

  /* ====== ENTRY SCREEN ====== */
  #entry{
    position:fixed; inset:0;
    z-index:10;
    background:#000;
    cursor:pointer;
    user-select:none;
    display:grid;
    place-items:center;
  }

  /* “fundo” com a imagem do combate (sem HUD) */
  .card{
    width:min(980px, 92vw);
    height:min(520px, 72vh);
    border-radius:16px;
    overflow:hidden;
    position:relative;
    box-shadow: 0 30px 90px rgba(0,0,0,.70);
    border: 1px solid rgba(255,190,120,.16);
    background:#000;
  }
  .card::before{
    content:"";
    position:absolute; inset:0;
    background: url("https://files.catbox.moe/5yp48z.png") center/cover no-repeat;
    filter: contrast(1.08) saturate(.98);
    transform: scale(1.02);
  }

  /* “apagador/blur” na frente (pra ficar menos nítida e mais vibe) */
  .card::after{
    content:"";
    position:absolute; inset:-30%;
    background:
      radial-gradient(circle at 45% 45%, rgba(0,0,0,.10), rgba(0,0,0,.75) 60%, rgba(0,0,0,.92) 100%),
      radial-gradient(circle at 50% 50%, rgba(255,190,120,.10), transparent 55%);
    filter: blur(16px);
    opacity:.95;
  }

  /* partículas cinza/brasa */
  #fx{
    position:fixed; inset:0;
    z-index:9;
    pointer-events:none;
    opacity:1;
  }

  /* texto do enter */
  .enterWrap{
    position:absolute; inset:0;
    display:grid;
    place-items:center;
    z-index:3;
  }
  .enterTitle{
    font-family: "Uncial Antiqua", "IM Fell English", serif;
    letter-spacing: 5px;
    font-size: clamp(44px, 6vw, 78px);
    color: rgba(255,210,160,.92);
    text-shadow:
      0 2px 0 rgba(0,0,0,.65),
      0 18px 60px rgba(0,0,0,.55),
      0 0 18px rgba(255,190,120,.22);
    transform: translateY(-4px);
  }

  .sub{
    margin-top:10px;
    font-family: "IM Fell English", serif;
    font-size: 14px;
    letter-spacing: 4px;
    color: rgba(255,255,255,.28);
    text-transform: uppercase;
    position:relative;
    display:inline-flex;
    gap:10px;
    align-items:center;
    justify-content:center;
    isolation:isolate;
  }

  .keycap{
    display:inline-flex;
    align-items:center;
    justify-content:center;
    min-width: 54px;
    height: 28px;
    padding: 0 10px;
    border-radius: 8px;
    border: 1px solid rgba(255,190,120,.18);
    background: rgba(0,0,0,.35);
    color: rgba(255,220,185,.85);
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    font-size: 12px;
    letter-spacing: 1px;
  }

  /* ===== Efeito “cinza passando” no sub ===== */
  .sub::after{
    content:"";
    position:absolute;
    left:-18%;
    top:-10px;
    width:36%;
    height:calc(100% + 20px);
    pointer-events:none;
    z-index:-1;
    background:
      radial-gradient(circle at 30% 45%, rgba(255,255,255,0.10), transparent 60%),
      radial-gradient(circle at 60% 55%, rgba(255,255,255,0.07), transparent 62%),
      linear-gradient(90deg,
        rgba(0,0,0,0) 0%,
        rgba(255,255,255,0.10) 35%,
        rgba(255,255,255,0.18) 50%,
        rgba(255,255,255,0.10) 65%,
        rgba(0,0,0,0) 100%);
    filter: blur(10px) contrast(1.2);
    opacity:0.0;
    transform:skewX(-18deg);
    mix-blend-mode:overlay;
    animation:ashSweep 2.8s ease-in-out infinite;
  }
  @keyframes ashSweep{
    0%   { transform:translateX(-60%) skewX(-18deg); opacity:0.0; }
    20%  { opacity:0.0; }
    35%  { opacity:0.35; }
    50%  { opacity:0.55; }
    65%  { opacity:0.35; }
    80%  { opacity:0.0; }
    100% { transform:translateX(260%) skewX(-18deg); opacity:0.0; }
  }

  /* entrada some */
  body.entered #entry{
    opacity:0;
    pointer-events:none;
    transition: opacity 650ms ease;
  }

  /* ===== UI: volume (top-left) ===== */
  #ui{
    position:fixed; inset:0;
    z-index:20;
    pointer-events:none;
  }
  .vol{
    position:absolute;
    top:18px; left:18px;
    width:46px; height:46px;
    border-radius:14px;
    background: rgba(0,0,0,.45);
    border: 1px solid rgba(255,190,120,.16);
    box-shadow: 0 14px 50px rgba(0,0,0,.55);
    display:grid;
    place-items:center;
    pointer-events:auto;
    cursor:pointer;
    backdrop-filter: blur(8px);
  }
  .vol svg{opacity:.9; filter: drop-shadow(0 0 10px rgba(255,190,120,.12))}
  .volPanel{
    position:absolute;
    top:18px; left:72px;
    width:220px;
    padding:12px 12px;
    border-radius:14px;
    background: rgba(0,0,0,.55);
    border: 1px solid rgba(255,190,120,.16);
    box-shadow: 0 14px 60px rgba(0,0,0,.65);
    pointer-events:auto;
    opacity:0;
    transform: translateX(-8px);
    transition: opacity .18s ease, transform .18s ease;
    backdrop-filter: blur(10px);
  }
  .volPanel.open{opacity:1; transform: translateX(0)}
  .volRow{
    display:flex; gap:12px; align-items:center;
    font-family: "IM Fell English", serif;
    color: rgba(255,255,255,.75);
  }
  input[type="range"]{width:100%}

  /* ===== UI: ícone do pergaminho (top-center) ===== */
  .scrollBtn{
    position:absolute;
    top:14px; left:50%;
    transform: translateX(-50%);
    width:54px; height:54px;
    border-radius:18px;
    display:grid; place-items:center;
    background: rgba(0,0,0,.35);
    border: 1px solid rgba(255,190,120,.14);
    box-shadow: 0 14px 60px rgba(0,0,0,.55);
    pointer-events:auto;
    cursor:pointer;
    backdrop-filter: blur(10px);
  }
  .scrollBtn img{
    width:32px; height:32px;
    opacity:.9;
    filter: drop-shadow(0 0 12px rgba(255,190,120,.12));
  }

  /* ===== Pergaminho modal ===== */
  #scrollOverlay{
    position:fixed; inset:0;
    z-index:30;
    display:none;
    place-items:center;
    background: rgba(0,0,0,.55);
    backdrop-filter: blur(10px);
  }
  #scrollOverlay.open{display:grid}

  .scroll{
    width:min(980px, 92vw);
    height:min(620px, 86vh);
    position:relative;
    padding:26px 30px 64px;
    color: var(--ink);
    border-radius: 14px;
    overflow:hidden;

    /* “papel velho” (mais queimado nas bordas) */
    background:
      radial-gradient(circle at 50% 40%, rgba(255,255,255,.18), transparent 60%),
      radial-gradient(circle at 10% 12%, rgba(110,60,15,.35), transparent 52%),
      radial-gradient(circle at 92% 16%, rgba(120,65,18,.32), transparent 52%),
      radial-gradient(circle at 14% 86%, rgba(120,65,18,.35), transparent 56%),
      radial-gradient(circle at 88% 88%, rgba(120,65,18,.34), transparent 56%),
      linear-gradient(180deg, rgba(240,220,180,.95), rgba(210,180,135,.98));

    box-shadow: 0 30px 120px rgba(0,0,0,.70);
    border: 1px solid rgba(90,55,20,.35);

    /* bordas “rasgadas” */
    clip-path: polygon(
      2% 4%, 9% 2%, 16% 3%, 24% 2%, 32% 3%, 40% 2%, 48% 3%, 56% 2%, 64% 3%, 72% 2%, 80% 3%, 88% 2%, 96% 3%,
      98% 10%, 97% 18%, 98% 26%, 97% 34%, 98% 42%, 97% 50%, 98% 58%, 97% 66%, 98% 74%, 97% 82%, 98% 90%,
      96% 97%, 88% 98%, 80% 97%, 72% 98%, 64% 97%, 56% 98%, 48% 97%, 40% 98%, 32% 97%, 24% 98%, 16% 97%, 9% 98%, 2% 96%,
      1% 90%, 2% 82%, 1% 74%, 2% 66%, 1% 58%, 2% 50%, 1% 42%, 2% 34%, 1% 26%, 2% 18%, 1% 10%
    );
  }

  .scroll::after{
    content:"";
    position:absolute; inset:0;
    pointer-events:none;
    background:
      radial-gradient(circle at 50% 50%, rgba(0,0,0,.06), transparent 58%),
      linear-gradient(90deg, rgba(0,0,0,.07), transparent 30%, transparent 70%, rgba(0,0,0,.07));
    opacity:.55;
  }

  .scrollHeader{
    display:flex;
    align-items:flex-start;
    justify-content:space-between;
    gap:14px;
    position:relative;
    z-index:2;
  }
  .scrollTitle{
    font-family: "Uncial Antiqua", serif;
    letter-spacing: 4px;
    text-transform:uppercase;
    font-size: 15px;
    color: rgba(35,20,10,.86);
    text-shadow: 0 1px 0 rgba(255,255,255,.35);
  }

  /* FECHAR: só texto (sem caixa), estilo carimbado */
  .closeBtn{
    border:none;
    background:transparent;
    font-family:"Uncial Antiqua", serif;
    letter-spacing: 3px;
    text-transform:uppercase;
    font-size: 12px;
    color: rgba(55,28,12,.70);
    cursor:pointer;
    padding:4px 0;
    opacity:.9;
    text-shadow:
      0 1px 0 rgba(255,255,255,.25),
      0 0 0 rgba(0,0,0,0),
      0 0 10px rgba(0,0,0,.06);
  }
  .closeBtn:hover{opacity:1; color: rgba(55,28,12,.85);}

  .scrollBody{
    margin-top:16px;
    position:relative;
    z-index:2;
    height: calc(100% - 78px);
    display:flex;
    flex-direction:column;
    gap:12px;
  }

  /* texto: mais “tinta” e leitura */
  .log{
    flex:1;
    overflow:auto;
    padding-right:8px;
    font-family:"IM Fell English", serif;
    font-size: 17px;
    line-height: 1.45;
    color: rgba(22,12,7,.90);
    text-shadow: 0 1px 0 rgba(255,255,255,.18);
  }
  .log em{font-style:italic; color: rgba(22,12,7,.86)}
  .log strong{
    font-family:"Uncial Antiqua", serif;
    font-weight:400;
    letter-spacing:2px;
    color: rgba(18,10,6,.88);
  }

  .cmdBar{
    display:flex;
    align-items:center;
    gap:10px;
    padding:10px 12px;
    border-top: 1px solid rgba(0,0,0,.12);
    background: rgba(0,0,0,.04);
    border-radius: 10px;
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    color: rgba(20,12,7,.85);
  }
  .prompt{opacity:.9}
  .cmdInput{
    flex:1;
    border:none;
    outline:none;
    background:transparent;
    color: rgba(20,12,7,.92);
    font-size: 13px;
  }
  .cmdInput:disabled{opacity:.35}
  .hintSmall{
    opacity:.7;
    font-size: 12px;
  }

  /* acessibilidade: reduz motion */
  @media (prefers-reduced-motion: reduce){
    .sub::after{animation:none}
  }
</style>
</head>

<body>

  <!-- vídeo (fundo do site) -->
  <video
    id="mainVideo"
    src="https://files.catbox.moe/klaol5.webm"
    playsinline
    preload="auto"
    muted
    loop
  ></video>
  <div id="sceneShade"></div>

  <!-- áudio separado (pra garantir som mesmo com vídeo blurred/muted) -->
  <audio id="mainAudio" src="https://files.catbox.moe/99fu05.m4a" preload="auto"></audio>

  <!-- canvas cinzas/brasas -->
  <canvas id="fx"></canvas>

  <!-- UI -->
  <div id="ui" aria-hidden="false">
    <!-- volume (top-left) -->
    <div class="vol" id="volBtn" title="Volume">
      <!-- ícone alto-falante -->
      <svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M11 5L6.8 8.2H4a2 2 0 0 0-2 2v3.6a2 2 0 0 0 2 2h2.8L11 21V5Z" stroke="rgba(255,210,160,.92)" stroke-width="1.6" stroke-linejoin="round"/>
        <path d="M15.5 8.8c1.2 1.1 1.2 5.3 0 6.4" stroke="rgba(255,210,160,.72)" stroke-width="1.6" stroke-linecap="round"/>
        <path d="M18 6.8c2.2 2.1 2.2 8.3 0 10.4" stroke="rgba(255,210,160,.40)" stroke-width="1.6" stroke-linecap="round"/>
      </svg>
    </div>

    <div class="volPanel" id="volPanel">
      <div class="volRow">
        <span style="opacity:.85">VOL</span>
        <input id="volRange" type="range" min="0" max="100" value="8" />
        <span id="volPct" style="min-width:34px;text-align:right;opacity:.85">8%</span>
      </div>
    </div>

    <!-- botão pergaminho (top-center) -->
    <div class="scrollBtn" id="scrollBtn" title="Pergaminho">
      <!-- se você tiver um ícone melhor depois, troca aqui -->
      <img src="https://files.catbox.moe/er48bx.gif" alt="Pergaminho">
    </div>
  </div>

  <!-- ENTRY -->
  <section id="entry" aria-label="Entrada Shadow Fight 2">
    <div class="card" role="button" aria-label="Entrar">
      <div class="enterWrap">
        <div style="text-align:center; z-index:4; position:relative;">
          <div class="enterTitle">ENTER</div>
          <div class="sub">
            <span>PRESS</span>
            <span class="keycap">ENTER</span>
            <span>OU</span>
            <span>CLIQUE</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Pergaminho Modal -->
  <div id="scrollOverlay" aria-hidden="true">
    <div class="scroll" role="dialog" aria-label="Pergaminho — Vozes nas Sombras">
      <div class="scrollHeader">
        <div class="scrollTitle">PERGAMINHO — VOZES NAS SOMBRAS</div>
        <button class="closeBtn" id="closeScroll" aria-label="Fechar">FECHAR</button>
      </div>

      <div class="scrollBody">
        <div class="log" id="log"></div>

        <div class="cmdBar">
          <span class="prompt">></span>
          <input class="cmdInput" id="cmdInput" placeholder="digite um comando (ex: hub, arquivo, lore, ajuda) e ENTER" disabled />
          <span class="hintSmall" id="cmdHint">Aguardando a lore…</span>
        </div>
      </div>
    </div>
  </div>

<script>
/* =========================
   CONFIG
========================= */
const ENTRY_BG_IMG = "https://files.catbox.moe/5yp48z.png";
const VIDEO_SRC    = "https://files.catbox.moe/klaol5.webm";
const AUDIO_SRC    = "https://files.catbox.moe/99fu05.m4a";

// Volume padrão: 8%
const DEFAULT_VOL = 0.08;

// Lore (digitação). Enquanto digita, input fica bloqueado.
const LORE_LINES = [
  { who: "MESTRE", text: "A arena está silenciosa... mas as sombras nunca dormem." },
  { who: "SHADOW", text: "Eu sinto o vazio se abrindo. Algo me chama do outro lado." },
  { who: "TITAN",  text: "Você acha que pode escapar? Eu já marquei seu destino." },
  { who: "MESTRE", text: "Não responda ao medo. Use-o. Transforme-o em lâmina." },
  { who: "SHADOW", text: "Então... eu entro. E se eu cair, que as sombras me devorem." },
  { who: "TITAN",  text: "Venha. Eu quero ouvir seu silêncio gritar." },
  { who: "SISTEMA", text: "Digite ajuda para ver comandos." }
];

/* =========================
   ELEMENTOS
========================= */
const entry = document.getElementById("entry");
const mainVideo = document.getElementById("mainVideo");
const mainAudio = document.getElementById("mainAudio");

const volBtn = document.getElementById("volBtn");
const volPanel = document.getElementById("volPanel");
const volRange = document.getElementById("volRange");
const volPct = document.getElementById("volPct");

const scrollBtn = document.getElementById("scrollBtn");
const scrollOverlay = document.getElementById("scrollOverlay");
const closeScroll = document.getElementById("closeScroll");
const logEl = document.getElementById("log");
const cmdInput = document.getElementById("cmdInput");
const cmdHint = document.getElementById("cmdHint");

/* =========================
   VIDEO/AUDIO INIT
========================= */
mainVideo.src = VIDEO_SRC;
mainAudio.src = AUDIO_SRC;
mainAudio.volume = DEFAULT_VOL;
volRange.value = Math.round(DEFAULT_VOL * 100);
volPct.textContent = `${volRange.value}%`;

/* =========================
   CANVAS FX: cinzas/brasas
========================= */
const canvas = document.getElementById("fx");
const ctx = canvas.getContext("2d", { alpha:true });
let W=0,H=0,DPR=1;
const rand=(a,b)=>Math.random()*(b-a)+a;

const ash = [];
const ASH_N = 140;

function resize(){
  DPR = devicePixelRatio || 1;
  W = canvas.width = innerWidth * DPR;
  H = canvas.height = innerHeight * DPR;
}
addEventListener("resize", resize);
resize();

function spawnAsh(){
  return {
    x: rand(0, W),
    y: H + rand(0, H*0.2),
    r: rand(0.6, 2.2) * DPR,
    vy: rand(0.18, 0.70) * DPR,
    vx: rand(-0.16, 0.16) * DPR,
    a: rand(0.02, 0.10),
    wob: rand(0.001, 0.006),
    phase: rand(0, Math.PI*2),
    hue: rand(0, 1) // 0 cinza, 1 brasa suave
  };
}
for(let i=0;i<ASH_N;i++) ash.push(spawnAsh());

function drawFX(){
  ctx.clearRect(0,0,W,H);

  for(const p of ash){
    p.x += p.vx + Math.sin(p.y*p.wob + p.phase) * (0.22*DPR);
    p.y -= p.vy;

    const a = p.a;
    const c = p.hue < 0.88
      ? `rgba(230,230,230,${a})`
      : `rgba(255,170,110,${a*0.75})`;

    ctx.beginPath();
    ctx.fillStyle = c;
    ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
    ctx.fill();

    if(p.y < -80 || p.x < -80 || p.x > W+80){
      Object.assign(p, spawnAsh());
      p.y = H + rand(0, H*0.2);
      p.x = rand(0, W);
    }
  }

  requestAnimationFrame(drawFX);
}
drawFX();

/* =========================
   ENTRY START (click/enter)
========================= */
let started = false;

async function start(){
  if(started) return;
  started = true;

  // play no gesto do usuário (pra não bloquear autoplay)
  try{
    await mainVideo.play();
  }catch(e){ /* ignore */ }

  // áudio separado (som do edit)
  try{
    await mainAudio.play();
  }catch(e){ /* se bloquear, usuário pode mexer no volume e destravar */ }

  document.body.classList.add("entered");

  // some com entry depois da transição
  setTimeout(()=>{ entry.style.display = "none"; }, 900);
}

// clique na entry
entry.addEventListener("pointerdown", start);

// tecla Enter/Space na entry
addEventListener("keydown", (e)=>{
  if(document.body.classList.contains("entered")) return;
  if(e.key === "Enter" || e.key === " "){
    e.preventDefault();
    start();
  }
});

/* =========================
   VOLUME UI
========================= */
let volOpen = false;

function setVolumeFromUI(){
  const v = Math.max(0, Math.min(100, Number(volRange.value)));
  volPct.textContent = `${v}%`;
  mainAudio.volume = v / 100;
}

volBtn.addEventListener("click", ()=>{
  volOpen = !volOpen;
  volPanel.classList.toggle("open", volOpen);
});

volRange.addEventListener("input", setVolumeFromUI);
setVolumeFromUI();

// fecha painel clicando fora
addEventListener("pointerdown", (e)=>{
  if(!volOpen) return;
  if(volPanel.contains(e.target) || volBtn.contains(e.target)) return;
  volOpen = false;
  volPanel.classList.remove("open");
});

/* =========================
   PERGAMINHO (modal + lore typing)
========================= */
let loreRunning = false;
let loreDone = false;

function openScroll(){
  scrollOverlay.classList.add("open");
  scrollOverlay.setAttribute("aria-hidden", "false");
  if(!loreRunning && !loreDone){
    runLoreTyping();
  }else{
    // se já terminou, libera
    if(loreDone){
      cmdInput.disabled = false;
      cmdHint.textContent = "Digite um comando e pressione ENTER.";
      setTimeout(()=>cmdInput.focus(), 30);
    }
  }
}
function closeScrollFn(){
  scrollOverlay.classList.remove("open");
  scrollOverlay.setAttribute("aria-hidden", "true");
}

scrollBtn.addEventListener("click", openScroll);
closeScroll.addEventListener("click", closeScrollFn);

// ESC fecha
addEventListener("keydown", (e)=>{
  if(e.key === "Escape" && scrollOverlay.classList.contains("open")){
    closeScrollFn();
  }
});

function appendLine(who, text){
  const line = document.createElement("div");
  line.innerHTML = `<strong>${who}</strong>: <em>${escapeHtml(text)}</em>`;
  logEl.appendChild(line);
  logEl.scrollTop = logEl.scrollHeight;
}

function escapeHtml(s){
  return s.replace(/[&<>"']/g, (m)=>({
    "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"
  }[m]));
}

function sleep(ms){ return new Promise(r=>setTimeout(r,ms)); }

async function typeLine(who, text){
  const line = document.createElement("div");
  line.innerHTML = `<strong>${who}</strong>: <em></em>`;
  const em = line.querySelector("em");
  logEl.appendChild(line);
  logEl.scrollTop = logEl.scrollHeight;

  for(let i=0;i<text.length;i++){
    em.textContent += text[i];
    // velocidade (ajuste fino)
    await sleep(16 + Math.random()*18);
    logEl.scrollTop = logEl.scrollHeight;
  }
}

async function runLoreTyping(){
  loreRunning = true;
  cmdInput.disabled = true;
  cmdHint.textContent = "A lore está sendo escrita…";

  // limpa (primeira vez)
  logEl.innerHTML = "";

  // digita cada linha
  for(const L of LORE_LINES){
    await typeLine(L.who, L.text);
    await sleep(260);
  }

  loreRunning = false;
  loreDone = true;

  cmdInput.disabled = false;
  cmdHint.textContent = "Digite um comando e pressione ENTER.";
  cmdInput.focus();
}

/* =========================
   COMMANDS (placeholder)
========================= */
cmdInput.addEventListener("keydown", (e)=>{
  if(e.key !== "Enter") return;
  const raw = cmdInput.value.trim();
  if(!raw) return;

  appendLine("VOCÊ", raw);
  cmdInput.value = "";

  const cmd = raw.toLowerCase();

  if(cmd === "ajuda"){
    appendLine("SISTEMA", "Comandos: hub, arquivo, lore, fechar");
    return;
  }
  if(cmd === "hub"){
    appendLine("SISTEMA", "(placeholder) Abrindo HUB…");
    return;
  }
  if(cmd === "arquivo"){
    appendLine("SISTEMA", "(placeholder) Abrindo ARQUIVO…");
    return;
  }
  if(cmd === "lore"){
    appendLine("SISTEMA", "(placeholder) Exibindo Lore…");
    return;
  }
  if(cmd === "fechar"){
    closeScrollFn();
    return;
  }

  appendLine("SISTEMA", "Comando desconhecido. Digite ajuda.");
});

/* =========================
   Qualidade de vida:
   - Abrir pergaminho automaticamente quando entrar (opcional)
========================= */
// Descomente se quiser abrir sozinho após entrar:
// document.body.addEventListener("transitionend", ()=>{
//   if(document.body.classList.contains("entered")) openScroll();
// }, { once:true });

</script>
</body>
</html>
