<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shadow Fight — Cinematic</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}
html,body{width:100%;height:100%;background:#000;overflow:hidden}

.stage{
  position:relative;
  width:100%;
  height:100%;
  display:flex;
  align-items:center;
  justify-content:center;
  background:#000;
}

/* VIDEO PRINCIPAL */
#mainVideo{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  opacity:0;
  transition:opacity .6s ease;
  z-index:1;
}

#mainVideo.active{
  opacity:1;
}

/* INTRO */
#intro{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:2;
}

/* PORTAL */
.portal{
  width:320px;
  height:320px;
  border-radius:50%;
  overflow:hidden;
  position:relative;
  transition:all 1s ease;
}

/* Quando ativa, vira fullscreen */
.portal.expand{
  width:100vw;
  height:100vh;
  border-radius:0;
}

/* VIDEO DO PORTAL */
.portal video{
  width:100%;
  height:100%;
  object-fit:cover;
  pointer-events:none;
}
</style>
</head>

<body>
<main class="stage">

  <video
    id="mainVideo"
    src="https://files.catbox.moe/klaol5.webm"
    muted
    loop
    playsinline
  ></video>

  <section id="intro">
    <div class="portal" id="portal">
      <video
        id="portalVideo"
        src="https://files.catbox.moe/5ci6gd.mp4"
        muted
        playsinline
      ></video>
    </div>
  </section>

</main>

<script>
const portal = document.getElementById("portal");
const portalVideo = document.getElementById("portalVideo");
const mainVideo = document.getElementById("mainVideo");

let started = false;

// deixa no frame inicial
portalVideo.addEventListener("loadeddata", () => {
  portalVideo.currentTime = 0;
  portalVideo.pause();
}, { once:true });

async function startSequence(){
  if(started) return;
  started = true;

  // começa animação
  await portalVideo.play();

  // expande para tela inteira
  portal.classList.add("expand");

  // quando terminar animação
  portalVideo.addEventListener("ended", ()=>{
    document.getElementById("intro").style.display="none";
    mainVideo.classList.add("active");
    mainVideo.play();
  }, { once:true });
}

portal.addEventListener("click", startSequence);
</script>

</body>
</html>
