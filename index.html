<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dottore</title>

<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
}

body{
    background:black;
    overflow:hidden;
    font-family:Arial, Helvetica, sans-serif;
}

/* VIDEO */
#video{
    position:fixed;
    inset:0;
    width:100%;
    height:100%;
    object-fit:contain;
    background:black;
    z-index:-2;
}

/* BLUR BACKGROUND */
#video-bg{
    position:fixed;
    inset:0;
    width:100%;
    height:100%;
    object-fit:cover;
    filter:blur(80px) brightness(.6);
    transform:scale(1.2);
    z-index:-3;
}

/* ENTER SCREEN */
#splash{
    position:fixed;
    inset:0;
    background:radial-gradient(circle at center, #111, #000);
    display:flex;
    justify-content:center;
    align-items:center;
    z-index:10;
    cursor:pointer;
    transition:opacity .8s ease;
}

#enter-box{
    padding:20px 60px;
    border-radius:14px;
    font-size:28px;
    letter-spacing:6px;
    color:white;
    backdrop-filter:blur(20px);
    background:rgba(255,255,255,0.08);
    border:1px solid rgba(255,255,255,0.15);
    transition:.3s;
}

#enter-box:hover{
    background:rgba(255,255,255,0.15);
    transform:scale(1.08);
}

/* VOLUME IOS STYLE */
#volumeWrapper{
    position:fixed;
    top:20px;
    left:20px;
    display:flex;
    align-items:center;
    gap:10px;
    z-index:20;
    opacity:0;
    transition:opacity .4s ease;
}

#volumeWrapper.visible{
    opacity:1;
}

#volumeBtn{
    width:44px;
    height:44px;
    border-radius:50%;
    backdrop-filter:blur(15px);
    background:rgba(255,255,255,0.1);
    border:1px solid rgba(255,255,255,0.15);
    display:flex;
    justify-content:center;
    align-items:center;
    cursor:pointer;
    transition:.3s;
}

#volumeBtn:hover{
    background:rgba(255,255,255,0.18);
}

#volumeBtn svg{
    width:22px;
    height:22px;
    fill:white;
    opacity:.8;
}

/* SLIDER */
#sliderContainer{
    width:0;
    overflow:hidden;
    transition:width .35s cubic-bezier(.4,0,.2,1);
}

#volumeWrapper.open #sliderContainer{
    width:120px;
}

#volumeRange{
    width:100%;
    appearance:none;
    height:4px;
    border-radius:4px;
    background:linear-gradient(to right, white 70%, rgba(255,255,255,.3) 70%);
    outline:none;
}

#volumeRange::-webkit-slider-thumb{
    appearance:none;
    width:14px;
    height:14px;
    border-radius:50%;
    background:white;
    cursor:pointer;
}
</style>
</head>
<body>

<!-- SPLASH -->
<div id="splash">
    <div id="enter-box">ENTER</div>
</div>

<!-- VIDEO -->
<video id="video-bg" muted playsinline>
    <source src="https://files.catbox.moe/um6f2u.mp4" type="video/mp4">
</video>

<video id="video" muted playsinline>
    <source src="https://files.catbox.moe/um6f2u.mp4" type="video/mp4">
</video>

<audio id="audio">
    <source src="https://files.catbox.moe/plro9c.mp3" type="audio/mpeg">
</audio>

<!-- VOLUME -->
<div id="volumeWrapper">
    <div id="volumeBtn">
        <svg id="volumeIcon" viewBox="0 0 24 24">
            <path d="M3 9v6h4l5 5V4L7 9H3z"/>
            <path d="M16 8a4 4 0 010 8" fill="none" stroke="white" stroke-width="2"/>
        </svg>
    </div>
    <div id="sliderContainer">
        <input type="range" id="volumeRange" min="0" max="1" step="0.01" value="0.7">
    </div>
</div>

<script>

const splash = document.getElementById("splash");
const video = document.getElementById("video");
const videoBg = document.getElementById("video-bg");
const audio = document.getElementById("audio");

const volumeWrapper = document.getElementById("volumeWrapper");
const volumeBtn = document.getElementById("volumeBtn");
const volumeRange = document.getElementById("volumeRange");
const volumeIcon = document.getElementById("volumeIcon");

audio.volume = 0.7;

/* START */
splash.addEventListener("click", ()=>{
    splash.style.opacity="0";
    setTimeout(()=>splash.style.display="none",800);

    video.play();
    videoBg.play();
    audio.play();

    volumeWrapper.classList.add("visible");
});

/* SINCRONIZAÇÃO SUAVE */
audio.addEventListener("play",()=>{
    video.currentTime = audio.currentTime;
    videoBg.currentTime = audio.currentTime;
});

setInterval(()=>{
    if(Math.abs(video.currentTime - audio.currentTime) > 0.25){
        video.currentTime = audio.currentTime;
        videoBg.currentTime = audio.currentTime;
    }
},2000);

/* VOLUME */
let hideTimeout;

function showVolume(){
    volumeWrapper.classList.add("visible");
    clearTimeout(hideTimeout);
    hideTimeout = setTimeout(()=>{
        volumeWrapper.classList.remove("visible");
        volumeWrapper.classList.remove("open");
    },3000);
}

document.addEventListener("mousemove", showVolume);

volumeBtn.addEventListener("click", ()=>{
    volumeWrapper.classList.toggle("open");
    showVolume();
});

volumeRange.addEventListener("input", ()=>{
    audio.volume = volumeRange.value;

    const percent = volumeRange.value * 100;
    volumeRange.style.background =
        `linear-gradient(to right, white ${percent}%, rgba(255,255,255,.3) ${percent}%)`;
});

/* LOOP LIMPO */
audio.addEventListener("ended",()=>{
    audio.currentTime = 0;
    video.currentTime = 0;
    videoBg.currentTime = 0;
    audio.play();
    video.play();
    videoBg.play();
});

</script>

</body>
</html>
