<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Shadow Fight 2 — Brutal Entry</title>

<style>
  *{margin:0;padding:0;box-sizing:border-box}
  html,body{width:100%;height:100%;overflow:hidden;background:#000}

  :root{
    --ash: rgba(255,200,140,0.14);
    --ember: rgba(255,140,70,0.85);
    --ember2: rgba(255,175,115,0.22);
    --gold: rgba(210,170,80,0.18);
  }

  /* Página principal (vídeo) */
  #mainVideo{
    position:fixed; inset:0;
    width:100%; height:100%;
    object-fit:cover;
    z-index:0;
    opacity:0;
    transition:opacity 700ms ease;
    filter:contrast(1.06) saturate(0.9);
  }
  body.entered #mainVideo{opacity:1}

  /* ENTRY */
  #entry{
    position:fixed; inset:0;
    z-index:10;
    display:grid;
    place-items:center;
    cursor:pointer;
    user-select:none;
    background:linear-gradient(to bottom, #0b0a08, #050505);
  }

  /* pergaminho/grunge (sem imagem) */
  #entry::before{
    content:"";
    position:absolute; inset:-90px;
    background:
      radial-gradient(circle at 18% 30%, rgba(255,255,255,0.05), transparent 58%),
      radial-gradient(circle at 78% 55%, rgba(255,255,255,0.035), transparent 60%),
      radial-gradient(circle at 50% 85%, rgba(255,140,70,0.04), transparent 58%),
      repeating-linear-gradient(102deg, rgba(255,255,255,0.02) 0 2px, transparent 2px 18px),
      repeating-linear-gradient(0deg, rgba(0,0,0,0.46) 0 1px, transparent 1px 5px);
    opacity:.95;
    filter:blur(0.25px);
    pointer-events:none;
  }

  /* vinheta forte + “bordas queimadas” */
  #entry::after{
    content:"";
    position:absolute; inset:0;
    background:
      radial-gradient(circle at center, rgba(0,0,0,0.05) 18%, rgba(0,0,0,0.92) 100%),
      radial-gradient(circle at 50% 92%, rgba(255,140,70,0.06), transparent 52%);
    pointer-events:none;
  }

  /* canvas de poeira/fumaça */
  #fx{
    position:absolute; inset:0;
    z-index:1;
    pointer-events:none;
  }

  /* glow baixo laranja queimado */
  .ground{
    position:absolute;
    left:-15%; right:-15%;
    bottom:-25%;
    height:65%;
    z-index:2;
    background:radial-gradient(circle at 50% 90%, rgba(255,140,70,0.14), transparent 64%);
    filter:blur(14px);
    pointer-events:none;
    opacity:.9;
  }

  /* container central */
  .stage{
    position:relative;
    width:min(980px, 94vw);
    height:min(720px, 86vh);
    display:grid;
    place-items:center;
    z-index:5;
  }

  /* Silhueta central (1 só) */
  .warrior{
    width:min(420px, 56vw);
    opacity:.96;
    filter:drop-shadow(0 0 18px rgba(255,140,70,0.08));
    transform:translateY(10px);
    animation:breath 3.2s ease-in-out infinite;
  }
  @keyframes breath{
    0%,100%{transform:translateY(10px)}
    50%{transform:translateY(6px)}
  }

  /* texto SF2 discreto, sem modernidade */
  .hudline{
    position:absolute;
    bottom:44px;
    left:50%;
    width:min(560px, 86vw);
    height:1px;
    transform:translateX(-50%);
    background:linear-gradient(90deg, transparent, var(--gold), transparent);
    opacity:.55;
  }
  .title{
    position:absolute;
    bottom:24px;
    width:100%;
    text-align:center;
    font-size:12px;
    letter-spacing:6px;
    text-transform:uppercase;
    color:rgba(220,190,110,0.22);
  }
  .subtitle{
    position:absolute;
    bottom:6px;
    width:100%;
    text-align:center;
    font-size:12px;
    letter-spacing:4px;
    text-transform:uppercase;
    color:rgba(255,255,255,0.18);
  }

  /* ===== Slash diagonal + flash ===== */
  .flash{
    position:fixed; inset:0;
    z-index:12;
    pointer-events:none;
    opacity:0;
    background:#fff;
  }

  .slash{
    position:fixed;
    inset:-35%;
    z-index:11;
    pointer-events:none;
    opacity:0;
    transform:rotate(-18deg) translateX(-55%);
    background:
      linear-gradient(90deg,
        transparent 0%,
        rgba(255,210,160,0.12) 42%,
        rgba(255,160,90,0.78) 50%,
        rgba(255,210,160,0.12) 58%,
        transparent 100%);
    filter:blur(0.25px);
  }

  /* ===== Rasgo via clip-path (irregular) =====
     A gente “abre” a página principal revelando o vídeo por trás.
  */
  .tearMask{
    position:fixed; inset:0;
    z-index:10;
    pointer-events:none;
    background:transparent;
    /* Começa fechado: tudo coberto (entry visível) */
    clip-path:polygon(0 0, 100% 0, 100% 100%, 0 100%);
  }

  /* transição: abre uma fenda irregular no diagonal */
  body.ripping #entry{
    /* entry fica por cima, mas vamos apagar rápido depois */
  }

  body.slash .flash{
    animation:flash 180ms ease forwards;
  }
  @keyframes flash{
    0%{opacity:0}
    35%{opacity:0.55}
    100%{opacity:0}
  }

  body.slash .slash{
    opacity:1;
    animation:slashMove 240ms ease forwards;
  }
  @keyframes slashMove{
    0%{transform:rotate(-18deg) translateX(-65%)}
    100%{transform:rotate(-18deg) translateX(65%)}
  }

  /* clip-path abrindo (rasgo brutal irregular) */
  body.ripping .tearMask{
    animation:tearOpen 520ms cubic-bezier(.12,.92,.12,1) forwards;
  }
  @keyframes tearOpen{
    0%{
      clip-path:polygon(0 0,100% 0,100% 100%,0 100%);
    }
    55%{
      /* fenda diagonal irregular */
      clip-path:polygon(
        0 0,
        100% 0,
        100% 100%,
        0 100%,
        0 0,
        42% 0,
        48% 14%,
        52% 28%,
        49% 44%,
        56% 58%,
        50% 72%,
        58% 86%,
        52% 100%,
        42% 100%,
        46% 86%,
        40% 70%,
        45% 54%,
        38% 40%,
        44% 26%,
        39% 12%
      );
    }
    100%{
      /* abre geral: remove entry (revela vídeo) */
      clip-path:polygon(
        -10% -10%,
        110% -10%,
        110% 110%,
        -10% 110%,
        -10% -10%
      );
    }
  }

  /* some a entry depois da rasgada */
  body.entered #entry{
    opacity:0;
    pointer-events:none;
    transition:opacity 380ms ease;
  }

  /* acessibilidade */
  @media (prefers-reduced-motion: reduce){
    .warrior{animation:none}
    body.slash .slash, body.slash .flash{animation:none; opacity:1}
    body.ripping .tearMask{animation:none; clip-path:none}
  }
</style>
</head>

<body>
  <!-- página principal -->
  <video
    id="mainVideo"
    src="https://files.catbox.moe/klaol5.webm"
    playsinline
    preload="auto"
    muted
    loop
  ></video>

  <!-- máscara do rasgo (abre pra revelar o vídeo por trás) -->
  <div class="tearMask" aria-hidden="true"></div>

  <!-- entry -->
  <section id="entry" aria-label="Entrada Shadow Fight 2">
    <canvas id="fx"></canvas>
    <div class="ground" aria-hidden="true"></div>

    <div class="stage">
      <!-- SILHUETA CENTRAL ÚNICA (SVG brushy, sem círculos perfeitos) -->
      <svg class="warrior" viewBox="0 0 260 360" aria-hidden="true">
        <!-- capa/fumaça atrás (silhueta irregular) -->
        <path d="M68 128
                 C50 170, 52 220, 78 264
                 C94 292, 92 330, 60 352
                 L196 352
                 C170 332, 166 298, 182 270
                 C210 224, 212 176, 192 138
                 C168 98, 112 92, 68 128 Z"
              fill="#000"/>

        <!-- tronco -->
        <path d="M118 112
                 C96 124, 92 148, 96 176
                 L102 236
                 C104 262, 94 286, 84 304
                 C78 316, 82 328, 100 338
                 L160 338
                 C178 328, 182 316, 176 304
                 C166 286, 156 262, 158 236
                 L164 176
                 C168 148, 164 124, 142 112
                 C132 106, 128 106, 118 112 Z"
              fill="#000"/>

        <!-- cabeça -->
        <path d="M130 58
                 C112 58, 98 74, 98 92
                 C98 112, 112 126, 130 126
                 C148 126, 162 112, 162 92
                 C162 74, 148 58, 130 58 Z"
              fill="#000"/>

        <!-- braço segurando espada -->
        <path d="M164 150
                 C182 154, 194 166, 200 182
                 C206 200, 198 212, 184 210
                 C172 208, 166 196, 160 186 Z"
              fill="#000"/>

        <!-- perna esquerda -->
        <path d="M112 238
                 C98 268, 96 300, 104 338
                 L124 338
                 C124 304, 126 274, 132 246 Z"
              fill="#000"/>

        <!-- perna direita -->
        <path d="M148 238
                 C156 272, 158 304, 158 338
                 L178 338
                 C186 300, 184 268, 168 238 Z"
              fill="#000"/>

        <!-- espada (katana simples, sem look moderno) -->
        <path d="M198 176 L244 120
                 C248 114, 246 108, 240 104
                 C234 100, 228 102, 224 108
                 L180 164 Z"
              fill="#000"/>

        <!-- guarda da espada -->
        <path d="M184 166 L202 178 L194 188 L176 176 Z" fill="#000"/>

        <!-- olhos laranja quase invisíveis (vida sutil) -->
        <circle cx="122" cy="88" r="1.8" fill="rgba(255,140,70,0.35)"/>
        <circle cx="138" cy="88" r="1.8" fill="rgba(255,140,70,0.35)"/>
      </svg>

      <div class="hudline" aria-hidden="true"></div>
      <div class="title">DESPERTE A SOMBRA</div>
      <div class="subtitle">CLIQUE PARA ENTRAR</div>
    </div>

    <div class="slash" aria-hidden="true"></div>
    <div class="flash" aria-hidden="true"></div>
  </section>

<script>
  const entry = document.getElementById("entry");
  const mainVideo = document.getElementById("mainVideo");

  // ===== FX contínuo: fumaça/poeira + brasas laranja =====
  const canvas = document.getElementById("fx");
  const ctx = canvas.getContext("2d", { alpha:true });
  let W=0,H=0,DPR=1;

  const smoke = [];
  const embers = [];
  const SMOKE_N = 70;
  const EMBER_N = 120;
  const rand=(a,b)=>Math.random()*(b-a)+a;

  function resize(){
    DPR = devicePixelRatio || 1;
    W = canvas.width = innerWidth * DPR;
    H = canvas.height = innerHeight * DPR;
  }
  addEventListener("resize", resize);
  resize();

  function spawnSmoke(){
    return {
      x: rand(-W*0.1, W*1.1),
      y: H + rand(0,H*0.2),
      r: rand(24, 84)*DPR,
      vy: rand(0.14, 0.55)*DPR,
      vx: rand(0.06, 0.22)*DPR,     // vento lateral
      a: rand(0.012, 0.055),
      wob: rand(0.0015, 0.006),
      life: rand(0.7, 1.25)
    };
  }
  function spawnEmber(){
    return {
      x: rand(-W*0.1, W*1.1),
      y: H + rand(0,H*0.25),
      r: rand(0.6, 2.6)*DPR,
      vy: rand(0.35, 1.45)*DPR,
      vx: rand(0.10, 0.70)*DPR,     // vento mais forte
      a: rand(0.03, 0.22),
      wob: rand(0.002, 0.01),
      life: rand(0.7, 1.25)
    };
  }

  for(let i=0;i<SMOKE_N;i++) smoke.push(spawnSmoke());
  for(let i=0;i<EMBER_N;i++) embers.push(spawnEmber());

  function draw(){
    ctx.clearRect(0,0,W,H);

    // fumaça (cinza quente) + toque laranja
    for(const s of smoke){
      s.x += s.vx + Math.sin(s.y*s.wob)*(0.35*DPR);
      s.y -= s.vy;
      const a = Math.max(0, Math.min(0.10, s.a))*s.life;

      ctx.beginPath();
      ctx.fillStyle = `rgba(220, 210, 200, ${a})`;
      ctx.shadowColor = `rgba(255, 140, 70, ${a*0.35})`;
      ctx.shadowBlur = 18*DPR;
      ctx.arc(s.x, s.y, s.r, 0, Math.PI*2);
      ctx.fill();
      ctx.shadowBlur = 0;

      if(s.y < -100){
        Object.assign(s, spawnSmoke());
        s.y = H + rand(0,H*0.2);
        s.x = rand(-W*0.1, W*1.1);
      }
    }

    // brasas
    for(const p of embers){
      p.x += p.vx + Math.sin(p.y*p.wob)*(0.35*DPR);
      p.y -= p.vy;

      const a = Math.max(0, Math.min(0.35, p.a))*p.life;

      ctx.beginPath();
      ctx.fillStyle = `rgba(255, 140, 70, ${a*0.55})`;
      ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
      ctx.fill();

      // trilha curta
      ctx.beginPath();
      ctx.strokeStyle = `rgba(255, 210, 150, ${a*0.18})`;
      ctx.lineWidth = p.r*1.2;
      ctx.moveTo(p.x, p.y);
      ctx.lineTo(p.x - p.vx*10, p.y + p.vy*10);
      ctx.stroke();

      if(p.y < -80 || p.x > W+120){
        Object.assign(p, spawnEmber());
        p.y = H + rand(0,H*0.25);
        p.x = rand(-W*0.1, W*0.35);
      }
    }

    requestAnimationFrame(draw);
  }
  draw();

  // ===== som de corte (WebAudio) =====
  function playSlash(){
    try{
      const AC = window.AudioContext || window.webkitAudioContext;
      const ac = new AC();
      const now = ac.currentTime;

      const len = Math.floor(ac.sampleRate * 0.16);
      const buf = ac.createBuffer(1, len, ac.sampleRate);
      const d = buf.getChannelData(0);
      for(let i=0;i<d.length;i++){
        d[i] = (Math.random()*2-1) * (1 - i/d.length);
      }

      const noise = ac.createBufferSource(); noise.buffer = buf;

      const hp = ac.createBiquadFilter();
      hp.type = "highpass";
      hp.frequency.setValueAtTime(650, now);

      const g = ac.createGain();
      g.gain.setValueAtTime(0.0001, now);
      g.gain.exponentialRampToValueAtTime(0.18, now+0.02);
      g.gain.exponentialRampToValueAtTime(0.0001, now+0.16);

      noise.connect(hp); hp.connect(g); g.connect(ac.destination);

      const osc = ac.createOscillator();
      osc.type = "triangle";
      osc.frequency.setValueAtTime(520, now);
      osc.frequency.exponentialRampToValueAtTime(210, now+0.12);

      const og = ac.createGain();
      og.gain.setValueAtTime(0.0001, now);
      og.gain.exponentialRampToValueAtTime(0.10, now+0.02);
      og.gain.exponentialRampToValueAtTime(0.0001, now+0.14);

      osc.connect(og); og.connect(ac.destination);

      noise.start(now); noise.stop(now+0.16);
      osc.start(now); osc.stop(now+0.14);

      setTimeout(()=>ac.close().catch(()=>{}), 600);
    }catch(e){}
  }

  // ===== clique -> slash -> rasgo -> vídeo =====
  let started=false;
  function start(){
    if(started) return;
    started=true;

    // play dentro do gesto do clique
    mainVideo.play().catch(()=>{});

    document.body.classList.add("slash");
    playSlash();

    setTimeout(()=>document.body.classList.add("ripping"), 140);

    // entra
    setTimeout(()=>{
      document.body.classList.add("entered");
      setTimeout(()=>{ entry.style.display="none"; }, 650);
    }, 820);
  }

  entry.addEventListener("pointerdown", start);
  entry.addEventListener("keydown", (e)=>{
    if(e.key==="Enter" || e.key===" "){ e.preventDefault(); start(); }
  });
  entry.tabIndex = 0;
</script>
</body>
</html>
